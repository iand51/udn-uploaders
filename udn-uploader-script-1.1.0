#!/usr/bin/env node
(()=>{"use strict";var __webpack_modules__={320:function(__unused_webpack_module,exports,__webpack_require__){eval('\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { "default": mod };\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.uploadMultipartFileToS3 = exports.CHUNK_SIZE = void 0;\nvar path_1 = __importDefault(__webpack_require__(928));\nvar client_s3_1 = __webpack_require__(43);\nvar files_1 = __webpack_require__(18);\nvar errors_1 = __webpack_require__(34);\nexports.CHUNK_SIZE = 1024 * 1024 * 25;\nvar uploadMultipartFileToS3 = function (accessKeyId, bucket, filePath, folderName, region, secretAccessKey, sessionToken) { return __awaiter(void 0, void 0, void 0, function () {\n    var chunkCount, completedParts, credentials, fileName, locationKey, s3Client, createMultipartUpload, UploadId, _a, _b, _c, chunk, ETag, e_1_1, error_1;\n    var _d, e_1, _e, _f;\n    return __generator(this, function (_g) {\n        switch (_g.label) {\n            case 0:\n                _g.trys.push([0, 18, , 19]);\n                chunkCount = 1;\n                completedParts = [];\n                credentials = { accessKeyId: accessKeyId, secretAccessKey: secretAccessKey, sessionToken: sessionToken };\n                fileName = path_1.default.basename(filePath);\n                locationKey = "".concat(folderName, "/").concat(fileName);\n                s3Client = new client_s3_1.S3Client({ credentials: credentials, region: region });\n                createMultipartUpload = new client_s3_1.CreateMultipartUploadCommand({ Bucket: bucket, Key: locationKey });\n                return [4, s3Client.send(createMultipartUpload)];\n            case 1:\n                UploadId = (_g.sent()).UploadId;\n                _g.label = 2;\n            case 2:\n                _g.trys.push([2, 10, 11, 16]);\n                _a = true, _b = __asyncValues((0, files_1.generateChunks)(filePath, exports.CHUNK_SIZE));\n                _g.label = 3;\n            case 3: return [4, _b.next()];\n            case 4:\n                if (!(_c = _g.sent(), _d = _c.done, !_d)) return [3, 9];\n                _f = _c.value;\n                _a = false;\n                _g.label = 5;\n            case 5:\n                _g.trys.push([5, , 7, 8]);\n                chunk = _f;\n                return [4, s3Client.send(new client_s3_1.UploadPartCommand({\n                        Body: chunk, Bucket: bucket, Key: locationKey, PartNumber: chunkCount,\n                        UploadId: UploadId,\n                    }))];\n            case 6:\n                ETag = (_g.sent()).ETag;\n                completedParts.push({ ETag: ETag, PartNumber: chunkCount });\n                chunkCount++;\n                return [3, 8];\n            case 7:\n                _a = true;\n                return [7];\n            case 8: return [3, 3];\n            case 9: return [3, 16];\n            case 10:\n                e_1_1 = _g.sent();\n                e_1 = { error: e_1_1 };\n                return [3, 16];\n            case 11:\n                _g.trys.push([11, , 14, 15]);\n                if (!(!_a && !_d && (_e = _b.return))) return [3, 13];\n                return [4, _e.call(_b)];\n            case 12:\n                _g.sent();\n                _g.label = 13;\n            case 13: return [3, 15];\n            case 14:\n                if (e_1) throw e_1.error;\n                return [7];\n            case 15: return [7];\n            case 16: return [4, s3Client.send(new client_s3_1.CompleteMultipartUploadCommand({\n                    Bucket: bucket, Key: locationKey, MultipartUpload: { Parts: completedParts },\n                    UploadId: UploadId,\n                }))];\n            case 17:\n                _g.sent();\n                return [3, 19];\n            case 18:\n                error_1 = _g.sent();\n                throw new Error(errors_1.s3UploadFailed);\n            case 19: return [2];\n        }\n    });\n}); };\nexports.uploadMultipartFileToS3 = uploadMultipartFileToS3;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzIwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBRUE7Ozs7Ozs7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUVBOztBQUFBOzs7O0FBR0E7Ozs7O0FBQUE7QUFBQTs7OztBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7O0FBRkE7QUFHQTtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7QUFBQTtBQUNBOztBQUZBOzs7O0FBSUE7Ozs7QUFFQTtBQXRDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Vkbi1nYXRld2F5Ly4uLy4uL1VzZXJzL2lhbmRvbmxvbi9EZXNrdG9wL3Vkbi1nYXRld2F5L3VwbG9hZGVyL3NyYy9hd3MudHM/NDRiYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tZXh0cmFuZW91cy1kZXBlbmRlbmNpZXMgKi9cbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5pbXBvcnQge1xuICBTM0NsaWVudCwgQ3JlYXRlTXVsdGlwYXJ0VXBsb2FkQ29tbWFuZCwgQ29tcGxldGVkUGFydCxcbiAgVXBsb2FkUGFydENvbW1hbmQsIENvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkQ29tbWFuZCxcbn0gZnJvbSAnQGF3cy1zZGsvY2xpZW50LXMzJ1xuaW1wb3J0IHsgZ2VuZXJhdGVDaHVua3MgfSBmcm9tICcuL2ZpbGVzJ1xuaW1wb3J0IHsgczNVcGxvYWRGYWlsZWQgfSBmcm9tICcuL2Vycm9ycydcblxuZXhwb3J0IGNvbnN0IENIVU5LX1NJWkUgPSAxMDI0ICogMTAyNCAqIDI1IC8vIGluIEtCIHNvIDEwMjQgKiAxMDI0IGlzIE1CIGFuZCB3ZSB1c2UgMjVtYiBjaHVua3NcblxuZXhwb3J0IGNvbnN0IHVwbG9hZE11bHRpcGFydEZpbGVUb1MzID0gYXN5bmMgKFxuICBhY2Nlc3NLZXlJZDogc3RyaW5nLFxuICBidWNrZXQ6IHN0cmluZyxcbiAgZmlsZVBhdGg6IHN0cmluZyxcbiAgZm9sZGVyTmFtZTogc3RyaW5nLFxuICByZWdpb246IHN0cmluZyxcbiAgc2VjcmV0QWNjZXNzS2V5OiBzdHJpbmcsXG4gIHNlc3Npb25Ub2tlbjogc3RyaW5nLFxuKSA9PiB7XG4gIHRyeSB7XG4gICAgbGV0IGNodW5rQ291bnQgPSAxXG4gICAgY29uc3QgY29tcGxldGVkUGFydHMgPSBbXSBhcyBBcnJheTxDb21wbGV0ZWRQYXJ0PlxuICAgIGNvbnN0IGNyZWRlbnRpYWxzID0geyBhY2Nlc3NLZXlJZCwgc2VjcmV0QWNjZXNzS2V5LCBzZXNzaW9uVG9rZW4gfVxuICAgIGNvbnN0IGZpbGVOYW1lID0gcGF0aC5iYXNlbmFtZShmaWxlUGF0aClcbiAgICBjb25zdCBsb2NhdGlvbktleSA9IGAke2ZvbGRlck5hbWV9LyR7ZmlsZU5hbWV9YFxuXG4gICAgY29uc3QgczNDbGllbnQgPSBuZXcgUzNDbGllbnQoeyBjcmVkZW50aWFscywgcmVnaW9uIH0pXG5cbiAgICBjb25zdCBjcmVhdGVNdWx0aXBhcnRVcGxvYWQgPSBuZXcgQ3JlYXRlTXVsdGlwYXJ0VXBsb2FkQ29tbWFuZCh7IEJ1Y2tldDogYnVja2V0LCBLZXk6IGxvY2F0aW9uS2V5IH0pXG5cbiAgICBjb25zdCB7IFVwbG9hZElkIH0gPSBhd2FpdCBzM0NsaWVudC5zZW5kKGNyZWF0ZU11bHRpcGFydFVwbG9hZClcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZ2VuZXJhdGVDaHVua3MoZmlsZVBhdGgsIENIVU5LX1NJWkUpKSB7XG4gICAgICBjb25zdCB7IEVUYWcgfSA9IGF3YWl0IHMzQ2xpZW50LnNlbmQobmV3IFVwbG9hZFBhcnRDb21tYW5kKHtcbiAgICAgICAgQm9keTogY2h1bmssIEJ1Y2tldDogYnVja2V0LCBLZXk6IGxvY2F0aW9uS2V5LCBQYXJ0TnVtYmVyOiBjaHVua0NvdW50LCBVcGxvYWRJZCxcbiAgICAgIH0pKVxuICAgICAgY29tcGxldGVkUGFydHMucHVzaCh7IEVUYWcsIFBhcnROdW1iZXI6IGNodW5rQ291bnQgfSlcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wbHVzcGx1c1xuICAgICAgY2h1bmtDb3VudCsrXG4gICAgfVxuXG4gICAgYXdhaXQgczNDbGllbnQuc2VuZChuZXcgQ29tcGxldGVNdWx0aXBhcnRVcGxvYWRDb21tYW5kKHtcbiAgICAgIEJ1Y2tldDogYnVja2V0LCBLZXk6IGxvY2F0aW9uS2V5LCBNdWx0aXBhcnRVcGxvYWQ6IHsgUGFydHM6IGNvbXBsZXRlZFBhcnRzIH0sIFVwbG9hZElkLFxuICAgIH0pKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihzM1VwbG9hZEZhaWxlZClcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///320\n')},395:function(__unused_webpack_module,exports,__webpack_require__){eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.writeConfig = exports.loadConfig = exports.getLocalPath = void 0;\nvar fs_1 = __webpack_require__(896);\nvar path_1 = __webpack_require__(928);\nvar errors_1 = __webpack_require__(34);\nvar getLocalPath = function (argv) { return (argv[1].includes('executables.js')\n    ? argv[0]\n    : argv[1]); };\nexports.getLocalPath = getLocalPath;\nvar loadConfig = function (dev, path) {\n    var configPath = (0, path_1.join)((0, path_1.dirname)(path), '.uploader');\n    if (!(0, fs_1.existsSync)(configPath)) {\n        throw new Error(errors_1.badConfig);\n    }\n    try {\n        var config = JSON.parse((0, fs_1.readFileSync)(configPath).toString());\n        return dev ? config.development : config.production;\n    }\n    catch (error) {\n        throw new Error(errors_1.badConfig);\n    }\n};\nexports.loadConfig = loadConfig;\nvar writeConfig = function (dev, path, token) {\n    try {\n        var configPath = (0, path_1.join)((0, path_1.dirname)(path), '.uploader');\n        var development = (0, fs_1.existsSync)(configPath)\n            ? (0, exports.loadConfig)(true, path)\n            : { baseUrl: 'https://dev.undiagnosed.hms.harvard.edu', token: '' };\n        var production = (0, fs_1.existsSync)(configPath)\n            ? (0, exports.loadConfig)(false, path)\n            : { baseUrl: 'https://gateway.undiagnosed.hms.harvard.edu', token: '' };\n        var config = dev\n            ? { development: __assign(__assign({}, development), { token: token }), production: production }\n            : { development: development, production: __assign(__assign({}, production), { token: token }) };\n        (0, fs_1.writeFileSync)(configPath, JSON.stringify(config));\n        return { message: 'Config file successfully created', status: 0 };\n    }\n    catch (error) {\n        return { message: error.message, status: 1 };\n    }\n};\nexports.writeConfig = writeConfig;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzk1LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBZ0JBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBdEJBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWRuLWdhdGV3YXkvLi4vLi4vVXNlcnMvaWFuZG9ubG9uL0Rlc2t0b3AvdWRuLWdhdGV3YXkvdXBsb2FkZXIvc3JjL2NvbmZpZy50cz82NTQyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV4aXN0c1N5bmMsIHJlYWRGaWxlU3luYywgd3JpdGVGaWxlU3luYyB9IGZyb20gJ2ZzJ1xuaW1wb3J0IHsgZGlybmFtZSwgam9pbiB9IGZyb20gJ3BhdGgnXG5pbXBvcnQgeyBDb21tYW5kUmVzcG9uc2UsIEVudkNvbmZpZyB9IGZyb20gJy4uL3R5cGVzJ1xuXG5pbXBvcnQgeyBiYWRDb25maWcgfSBmcm9tICcuL2Vycm9ycydcblxuZXhwb3J0IGNvbnN0IGdldExvY2FsUGF0aCA9IChhcmd2OiBBcnJheTxzdHJpbmc+KTogc3RyaW5nID0+IChhcmd2WzFdLmluY2x1ZGVzKCdleGVjdXRhYmxlcy5qcycpXG4gID8gYXJndlswXVxuICA6IGFyZ3ZbMV0pXG5cbmV4cG9ydCBjb25zdCBsb2FkQ29uZmlnID0gKGRldjogYm9vbGVhbiwgcGF0aDogc3RyaW5nKTogRW52Q29uZmlnID0+IHtcbiAgY29uc3QgY29uZmlnUGF0aCA9IGpvaW4oZGlybmFtZShwYXRoKSwgJy51cGxvYWRlcicpXG5cbiAgaWYgKCFleGlzdHNTeW5jKGNvbmZpZ1BhdGgpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGJhZENvbmZpZylcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgY29uZmlnID0gSlNPTi5wYXJzZShyZWFkRmlsZVN5bmMoY29uZmlnUGF0aCkudG9TdHJpbmcoKSlcblxuICAgIHJldHVybiBkZXYgPyBjb25maWcuZGV2ZWxvcG1lbnQgOiBjb25maWcucHJvZHVjdGlvblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihiYWRDb25maWcpXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHdyaXRlQ29uZmlnID0gKGRldjogYm9vbGVhbiwgcGF0aDogc3RyaW5nLCB0b2tlbjogc3RyaW5nKTogQ29tbWFuZFJlc3BvbnNlID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb25maWdQYXRoID0gam9pbihkaXJuYW1lKHBhdGgpLCAnLnVwbG9hZGVyJylcblxuICAgIGNvbnN0IGRldmVsb3BtZW50ID0gZXhpc3RzU3luYyhjb25maWdQYXRoKVxuICAgICAgPyBsb2FkQ29uZmlnKHRydWUsIHBhdGgpXG4gICAgICA6IHsgYmFzZVVybDogJ2h0dHBzOi8vZGV2LnVuZGlhZ25vc2VkLmhtcy5oYXJ2YXJkLmVkdScsIHRva2VuOiAnJyB9XG5cbiAgICBjb25zdCBwcm9kdWN0aW9uID0gZXhpc3RzU3luYyhjb25maWdQYXRoKVxuICAgICAgPyBsb2FkQ29uZmlnKGZhbHNlLCBwYXRoKVxuICAgICAgOiB7IGJhc2VVcmw6ICdodHRwczovL2dhdGV3YXkudW5kaWFnbm9zZWQuaG1zLmhhcnZhcmQuZWR1JywgdG9rZW46ICcnIH1cblxuICAgIGNvbnN0IGNvbmZpZyA9IGRldlxuICAgICAgPyB7IGRldmVsb3BtZW50OiB7IC4uLmRldmVsb3BtZW50LCB0b2tlbiB9LCBwcm9kdWN0aW9uIH1cbiAgICAgIDogeyBkZXZlbG9wbWVudCwgcHJvZHVjdGlvbjogeyAuLi5wcm9kdWN0aW9uLCB0b2tlbiB9IH1cblxuICAgIHdyaXRlRmlsZVN5bmMoY29uZmlnUGF0aCwgSlNPTi5zdHJpbmdpZnkoY29uZmlnKSlcblxuICAgIHJldHVybiB7IG1lc3NhZ2U6ICdDb25maWcgZmlsZSBzdWNjZXNzZnVsbHkgY3JlYXRlZCcsIHN0YXR1czogMCB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwgc3RhdHVzOiAxIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///395\n")},34:function(__unused_webpack_module,exports,__webpack_require__){eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.parseErrorMessage = exports.unparseableJSON = exports.unknownError = exports.s3UploadFailed = exports.noMetadataJSONFile = exports.noJSONFile = exports.noFileAtPath = exports.invalidJSON = exports.badConfig = void 0;\nvar axios_1 = __importDefault(__webpack_require__(938));\nexports.badConfig = 'Unable to load configuration. Please run the `config` command to resolve this issue.';\nexports.invalidJSON = 'The JSON file associated with the file specified is invalid, please correct these errors:';\nexports.noFileAtPath = 'Unable to locate file at path specified. Please check your path is correct and try again.';\nexports.noJSONFile = 'Unable to locate the JSON file associated with the file specified. Please check that the JSON file is located with the the file specified and that they have matching names (ex. UDN000001.bam and UDN000001.bam.json).';\nexports.noMetadataJSONFile = 'Unable to locate the JSON file provided. Please ensure you have provided the correct path to the JSON file, not the sequencing data file.';\nexports.s3UploadFailed = 'Unable to upload file to S3. Please contact udngateway@hms-dbmi.atlassian.net for assistance debugging this issue.';\nexports.unknownError = 'Unknown error occurred. Please contact udngateway@hms-dbmi.atlassian.net for assistance debugging this issue.';\nexports.unparseableJSON = 'Unable to read the JSON file associated with file specified. Please check that the JSON in the file is valid.';\nvar parseErrorMessage = function (error) {\n    var errorMessage = '';\n    if (axios_1.default.isAxiosError(error)) {\n        var errorData = error.response ? error.response.data : {};\n        errorMessage = errorData.detail || errorData.error;\n    }\n    errorMessage = errorMessage || error.message;\n    return errorMessage || exports.unknownError;\n};\nexports.parseErrorMessage = parseErrorMessage;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBWkEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91ZG4tZ2F0ZXdheS8uLi8uLi9Vc2Vycy9pYW5kb25sb24vRGVza3RvcC91ZG4tZ2F0ZXdheS91cGxvYWRlci9zcmMvZXJyb3JzLnRzP2E4NGMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG5pbXBvcnQgYXhpb3MsIHsgQXhpb3NFcnJvciB9IGZyb20gJ2F4aW9zJ1xuXG5leHBvcnQgY29uc3QgYmFkQ29uZmlnID0gJ1VuYWJsZSB0byBsb2FkIGNvbmZpZ3VyYXRpb24uIFBsZWFzZSBydW4gdGhlIGBjb25maWdgIGNvbW1hbmQgdG8gcmVzb2x2ZSB0aGlzIGlzc3VlLidcbmV4cG9ydCBjb25zdCBpbnZhbGlkSlNPTiA9ICdUaGUgSlNPTiBmaWxlIGFzc29jaWF0ZWQgd2l0aCB0aGUgZmlsZSBzcGVjaWZpZWQgaXMgaW52YWxpZCwgcGxlYXNlIGNvcnJlY3QgdGhlc2UgZXJyb3JzOidcbmV4cG9ydCBjb25zdCBub0ZpbGVBdFBhdGggPSAnVW5hYmxlIHRvIGxvY2F0ZSBmaWxlIGF0IHBhdGggc3BlY2lmaWVkLiBQbGVhc2UgY2hlY2sgeW91ciBwYXRoIGlzIGNvcnJlY3QgYW5kIHRyeSBhZ2Fpbi4nXG5leHBvcnQgY29uc3Qgbm9KU09ORmlsZSA9ICdVbmFibGUgdG8gbG9jYXRlIHRoZSBKU09OIGZpbGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBmaWxlIHNwZWNpZmllZC4gUGxlYXNlIGNoZWNrIHRoYXQgdGhlIEpTT04gZmlsZSBpcyBsb2NhdGVkIHdpdGggdGhlIHRoZSBmaWxlIHNwZWNpZmllZCBhbmQgdGhhdCB0aGV5IGhhdmUgbWF0Y2hpbmcgbmFtZXMgKGV4LiBVRE4wMDAwMDEuYmFtIGFuZCBVRE4wMDAwMDEuYmFtLmpzb24pLidcbmV4cG9ydCBjb25zdCBub01ldGFkYXRhSlNPTkZpbGUgPSAnVW5hYmxlIHRvIGxvY2F0ZSB0aGUgSlNPTiBmaWxlIHByb3ZpZGVkLiBQbGVhc2UgZW5zdXJlIHlvdSBoYXZlIHByb3ZpZGVkIHRoZSBjb3JyZWN0IHBhdGggdG8gdGhlIEpTT04gZmlsZSwgbm90IHRoZSBzZXF1ZW5jaW5nIGRhdGEgZmlsZS4nXG5leHBvcnQgY29uc3QgczNVcGxvYWRGYWlsZWQgPSAnVW5hYmxlIHRvIHVwbG9hZCBmaWxlIHRvIFMzLiBQbGVhc2UgY29udGFjdCB1ZG5nYXRld2F5QGhtcy1kYm1pLmF0bGFzc2lhbi5uZXQgZm9yIGFzc2lzdGFuY2UgZGVidWdnaW5nIHRoaXMgaXNzdWUuJ1xuZXhwb3J0IGNvbnN0IHVua25vd25FcnJvciA9ICdVbmtub3duIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgY29udGFjdCB1ZG5nYXRld2F5QGhtcy1kYm1pLmF0bGFzc2lhbi5uZXQgZm9yIGFzc2lzdGFuY2UgZGVidWdnaW5nIHRoaXMgaXNzdWUuJ1xuZXhwb3J0IGNvbnN0IHVucGFyc2VhYmxlSlNPTiA9ICdVbmFibGUgdG8gcmVhZCB0aGUgSlNPTiBmaWxlIGFzc29jaWF0ZWQgd2l0aCBmaWxlIHNwZWNpZmllZC4gUGxlYXNlIGNoZWNrIHRoYXQgdGhlIEpTT04gaW4gdGhlIGZpbGUgaXMgdmFsaWQuJ1xuXG5leHBvcnQgY29uc3QgcGFyc2VFcnJvck1lc3NhZ2UgPSAoZXJyb3I6IEF4aW9zRXJyb3IgfCBFcnJvcik6IHN0cmluZyA9PiB7XG4gIGxldCBlcnJvck1lc3NhZ2UgPSAnJ1xuXG4gIGlmIChheGlvcy5pc0F4aW9zRXJyb3IoZXJyb3IpKSB7XG4gICAgY29uc3QgZXJyb3JEYXRhID0gZXJyb3IucmVzcG9uc2UgPyBlcnJvci5yZXNwb25zZS5kYXRhIDoge31cblxuICAgIGVycm9yTWVzc2FnZSA9IGVycm9yRGF0YS5kZXRhaWwgfHwgZXJyb3JEYXRhLmVycm9yXG4gIH1cblxuICBlcnJvck1lc3NhZ2UgPSBlcnJvck1lc3NhZ2UgfHwgZXJyb3IubWVzc2FnZVxuXG4gIHJldHVybiBlcnJvck1lc3NhZ2UgfHwgdW5rbm93bkVycm9yXG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///34\n")},18:function(__unused_webpack_module,exports,__webpack_require__){eval('\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __await = (this && this.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }\nvar __asyncGenerator = (this && this.__asyncGenerator) || function (thisArg, _arguments, generator) {\n    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\n    return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n    function fulfill(value) { resume("next", value); }\n    function reject(value) { resume("throw", value); }\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.generateChunks = exports.readBytes = void 0;\nvar fs_1 = __webpack_require__(896);\nvar readBytes = function (fileHandle, sharedBuffer) { return new Promise(function (resolve) {\n    (0, fs_1.read)(fileHandle, sharedBuffer, 0, sharedBuffer.length, null, function () {\n        resolve();\n    });\n}); };\nexports.readBytes = readBytes;\nvar generateChunks = function (filePath, size) {\n    return __asyncGenerator(this, arguments, function () {\n        var sharedBuffer, stats, fileHandler, bytesRead, end, i;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    sharedBuffer = Buffer.alloc(size);\n                    stats = (0, fs_1.statSync)(filePath);\n                    fileHandler = (0, fs_1.openSync)(filePath, \'r\');\n                    bytesRead = 0;\n                    end = size;\n                    i = 0;\n                    _a.label = 1;\n                case 1:\n                    if (!(i < Math.ceil(stats.size / size))) return [3, 6];\n                    return [4, __await((0, exports.readBytes)(fileHandler, sharedBuffer))];\n                case 2:\n                    _a.sent();\n                    bytesRead = (i + 1) * size;\n                    if (bytesRead > stats.size) {\n                        end = size - (bytesRead - stats.size);\n                    }\n                    return [4, __await(sharedBuffer.slice(0, end))];\n                case 3: return [4, _a.sent()];\n                case 4:\n                    _a.sent();\n                    _a.label = 5;\n                case 5:\n                    i++;\n                    return [3, 1];\n                case 6:\n                    (0, fs_1.closeSync)(fileHandler);\n                    return [2];\n            }\n        });\n    });\n};\nexports.generateChunks = generateChunks;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7QUFBQTtBQUNBOztBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBOztBQUFBOzs7QUFSQTs7O0FBV0E7Ozs7O0FBQ0E7QUFwQkEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91ZG4tZ2F0ZXdheS8uLi8uLi9Vc2Vycy9pYW5kb25sb24vRGVza3RvcC91ZG4tZ2F0ZXdheS91cGxvYWRlci9zcmMvZmlsZXMudHM/NTFmNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby1hd2FpdC1pbi1sb29wICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wbHVzcGx1cyAqL1xuaW1wb3J0IHsgY2xvc2VTeW5jLCBvcGVuU3luYywgcmVhZCwgc3RhdFN5bmMgfSBmcm9tICdmcydcblxuZXhwb3J0IGNvbnN0IHJlYWRCeXRlcyA9IChmaWxlSGFuZGxlOiBudW1iZXIsIHNoYXJlZEJ1ZmZlcjogQnVmZmVyKSA9PiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm5cbiAgcmVhZChmaWxlSGFuZGxlLCBzaGFyZWRCdWZmZXIsIDAsIHNoYXJlZEJ1ZmZlci5sZW5ndGgsIG51bGwsICgpID0+IHtcbiAgICByZXNvbHZlKClcbiAgfSlcbn0pXG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVDaHVua3MgPSBhc3luYyBmdW5jdGlvbiogKGZpbGVQYXRoOiBzdHJpbmcsIHNpemU6IG51bWJlcikge1xuICBjb25zdCBzaGFyZWRCdWZmZXIgPSBCdWZmZXIuYWxsb2Moc2l6ZSlcbiAgY29uc3Qgc3RhdHMgPSBzdGF0U3luYyhmaWxlUGF0aClcbiAgY29uc3QgZmlsZUhhbmRsZXIgPSBvcGVuU3luYyhmaWxlUGF0aCwgJ3InKVxuXG4gIGxldCBieXRlc1JlYWQgPSAwXG4gIGxldCBlbmQgPSBzaXplXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLmNlaWwoc3RhdHMuc2l6ZSAvIHNpemUpOyBpKyspIHtcbiAgICBhd2FpdCByZWFkQnl0ZXMoZmlsZUhhbmRsZXIsIHNoYXJlZEJ1ZmZlcilcbiAgICBieXRlc1JlYWQgPSAoaSArIDEpICogc2l6ZVxuXG4gICAgaWYgKGJ5dGVzUmVhZCA+IHN0YXRzLnNpemUpIHtcbiAgICAgIGVuZCA9IHNpemUgLSAoYnl0ZXNSZWFkIC0gc3RhdHMuc2l6ZSlcbiAgICB9XG5cbiAgICB5aWVsZCBzaGFyZWRCdWZmZXIuc2xpY2UoMCwgZW5kKVxuICB9XG5cbiAgY2xvc2VTeW5jKGZpbGVIYW5kbGVyKVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///18\n')},211:function(__unused_webpack_module,exports,__webpack_require__){eval('\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { "default": mod };\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.updateMetadata = exports.testConnection = exports.markComplete = exports.initiateFileUpload = exports.checkForUpdate = void 0;\nvar axios_1 = __importDefault(__webpack_require__(938));\nvar config_1 = __webpack_require__(395);\nvar errors_1 = __webpack_require__(34);\nvar version_1 = __webpack_require__(153);\nvar checkForUpdate = function (dev, path) { return __awaiter(void 0, void 0, Promise, function () {\n    var _a, baseUrl, token, data, error_1;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                _b.trys.push([0, 2, , 3]);\n                _a = (0, config_1.loadConfig)(dev, path), baseUrl = _a.baseUrl, token = _a.token;\n                return [4, axios_1.default.post("".concat(baseUrl, "/api/uploader/update"), (0, version_1.getVersionPayload)(), { headers: { Authorization: "Token ".concat(token) } })];\n            case 1:\n                data = (_b.sent()).data;\n                return [2, data.message\n                        ? { message: data.message, status: 0 }\n                        : { message: errors_1.unknownError, status: 1 }];\n            case 2:\n                error_1 = _b.sent();\n                return [2, { message: (0, errors_1.parseErrorMessage)(error_1), status: 1 }];\n            case 3: return [2];\n        }\n    });\n}); };\nexports.checkForUpdate = checkForUpdate;\nvar initiateFileUpload = function (dev, path, payload) { return __awaiter(void 0, void 0, Promise, function () {\n    var _a, baseUrl, token, data, error_2;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                _b.trys.push([0, 2, , 3]);\n                _a = (0, config_1.loadConfig)(dev, path), baseUrl = _a.baseUrl, token = _a.token;\n                return [4, axios_1.default.post("".concat(baseUrl, "/api/uploader/upload"), payload, { headers: { Authorization: "Token ".concat(token) } })];\n            case 1:\n                data = (_b.sent()).data;\n                return [2, data];\n            case 2:\n                error_2 = _b.sent();\n                throw new Error((0, errors_1.parseErrorMessage)(error_2));\n            case 3: return [2];\n        }\n    });\n}); };\nexports.initiateFileUpload = initiateFileUpload;\nvar markComplete = function (dev, path, payload) { return __awaiter(void 0, void 0, Promise, function () {\n    var _a, baseUrl, token, data, error_3;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                _b.trys.push([0, 2, , 3]);\n                _a = (0, config_1.loadConfig)(dev, path), baseUrl = _a.baseUrl, token = _a.token;\n                return [4, axios_1.default.post("".concat(baseUrl, "/api/uploader/complete"), payload, { headers: { Authorization: "Token ".concat(token) } })];\n            case 1:\n                data = (_b.sent()).data;\n                return [2, data.message\n                        ? { message: data.message, status: 0 }\n                        : { message: errors_1.unknownError, status: 1 }];\n            case 2:\n                error_3 = _b.sent();\n                throw new Error((0, errors_1.parseErrorMessage)(error_3));\n            case 3: return [2];\n        }\n    });\n}); };\nexports.markComplete = markComplete;\nvar testConnection = function (dev, path, payload) { return __awaiter(void 0, void 0, Promise, function () {\n    var _a, baseUrl, token, data, error_4;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                _b.trys.push([0, 2, , 3]);\n                _a = (0, config_1.loadConfig)(dev, path), baseUrl = _a.baseUrl, token = _a.token;\n                return [4, axios_1.default.post("".concat(baseUrl, "/api/uploader/test"), payload, { headers: { Authorization: "Token ".concat(token) } })];\n            case 1:\n                data = (_b.sent()).data;\n                return [2, data.message\n                        ? { message: data.message, status: 0 }\n                        : { message: errors_1.unknownError, status: 1 }];\n            case 2:\n                error_4 = _b.sent();\n                throw new Error((0, errors_1.parseErrorMessage)(error_4));\n            case 3: return [2];\n        }\n    });\n}); };\nexports.testConnection = testConnection;\nvar updateMetadata = function (dev, path, payload) { return __awaiter(void 0, void 0, Promise, function () {\n    var _a, baseUrl, token, data, error_5;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                _b.trys.push([0, 2, , 3]);\n                _a = (0, config_1.loadConfig)(dev, path), baseUrl = _a.baseUrl, token = _a.token;\n                return [4, axios_1.default.post("".concat(baseUrl, "/api/uploader/metadata"), payload, { headers: { Authorization: "Token ".concat(token) } })];\n            case 1:\n                data = (_b.sent()).data;\n                return [2, data.message\n                        ? { message: data.message, status: 0 }\n                        : { message: errors_1.unknownError, status: 1 }];\n            case 2:\n                error_5 = _b.sent();\n                throw new Error((0, errors_1.parseErrorMessage)(error_5));\n            case 3: return [2];\n        }\n    });\n}); };\nexports.updateMetadata = updateMetadata;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjExLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBS0E7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQUVBO0FBRUE7O0FBQUE7QUFNQTtBQUNBO0FBQ0E7OztBQUVBOzs7O0FBRUE7QUFoQkE7QUFrQkE7Ozs7OztBQU1BO0FBRUE7O0FBQUE7QUFNQTs7O0FBRUE7Ozs7QUFFQTtBQWxCQTtBQW9CQTs7Ozs7O0FBTUE7QUFFQTs7QUFBQTtBQU1BO0FBQ0E7QUFDQTs7O0FBRUE7Ozs7QUFFQTtBQXBCQTtBQXNCQTs7Ozs7O0FBTUE7QUFFQTs7QUFBQTtBQU1BO0FBQ0E7QUFDQTs7O0FBRUE7Ozs7QUFFQTtBQXBCQTtBQXNCQTs7Ozs7O0FBTUE7QUFFQTs7QUFBQTtBQU1BO0FBQ0E7QUFDQTs7O0FBRUE7Ozs7QUFFQTtBQXBCQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Vkbi1nYXRld2F5Ly4uLy4uL1VzZXJzL2lhbmRvbmxvbi9EZXNrdG9wL3Vkbi1nYXRld2F5L3VwbG9hZGVyL3NyYy9nYXRld2F5LnRzP2Q3NGUiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzICovXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnXG5pbXBvcnQge1xuICBDb21tYW5kUmVzcG9uc2UsIEluaXRpYXRlVXBsb2FkUmVxdWVzdFBheWxvYWQsIEluaXRpYXRlVXBsb2FkUmVzcG9uc2VQYXlsb2FkLCBNYXJrVXBsb2FkUmVxdWVzdFBheWxvYWQsXG59IGZyb20gJy4uL3R5cGVzJ1xuXG5pbXBvcnQgeyBsb2FkQ29uZmlnIH0gZnJvbSAnLi9jb25maWcnXG5pbXBvcnQgeyBwYXJzZUVycm9yTWVzc2FnZSwgdW5rbm93bkVycm9yIH0gZnJvbSAnLi9lcnJvcnMnXG5pbXBvcnQgeyBnZXRWZXJzaW9uUGF5bG9hZCB9IGZyb20gJy4vdmVyc2lvbidcblxuZXhwb3J0IGNvbnN0IGNoZWNrRm9yVXBkYXRlID0gYXN5bmMgKGRldjogYm9vbGVhbiwgcGF0aDogc3RyaW5nKTogUHJvbWlzZTxDb21tYW5kUmVzcG9uc2U+ID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGJhc2VVcmwsIHRva2VuIH0gPSBsb2FkQ29uZmlnKGRldiwgcGF0aClcblxuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MucG9zdChcbiAgICAgIGAke2Jhc2VVcmx9L2FwaS91cGxvYWRlci91cGRhdGVgLFxuICAgICAgZ2V0VmVyc2lvblBheWxvYWQoKSxcbiAgICAgIHsgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBgVG9rZW4gJHt0b2tlbn1gIH0gfSxcbiAgICApXG5cbiAgICByZXR1cm4gZGF0YS5tZXNzYWdlXG4gICAgICA/IHsgbWVzc2FnZTogZGF0YS5tZXNzYWdlLCBzdGF0dXM6IDAgfVxuICAgICAgOiB7IG1lc3NhZ2U6IHVua25vd25FcnJvciwgc3RhdHVzOiAxIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBtZXNzYWdlOiBwYXJzZUVycm9yTWVzc2FnZShlcnJvciksIHN0YXR1czogMSB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGluaXRpYXRlRmlsZVVwbG9hZCA9IGFzeW5jIChcbiAgZGV2OiBib29sZWFuLFxuICBwYXRoOiBzdHJpbmcsXG4gIHBheWxvYWQ6IEluaXRpYXRlVXBsb2FkUmVxdWVzdFBheWxvYWQsXG4pOiBQcm9taXNlPEluaXRpYXRlVXBsb2FkUmVzcG9uc2VQYXlsb2FkPiA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBiYXNlVXJsLCB0b2tlbiB9ID0gbG9hZENvbmZpZyhkZXYsIHBhdGgpXG5cbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLnBvc3QoXG4gICAgICBgJHtiYXNlVXJsfS9hcGkvdXBsb2FkZXIvdXBsb2FkYCxcbiAgICAgIHBheWxvYWQsXG4gICAgICB7IGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYFRva2VuICR7dG9rZW59YCB9IH0sXG4gICAgKVxuXG4gICAgcmV0dXJuIGRhdGFcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IocGFyc2VFcnJvck1lc3NhZ2UoZXJyb3IpKVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBtYXJrQ29tcGxldGUgPSBhc3luYyAoXG4gIGRldjogYm9vbGVhbixcbiAgcGF0aDogc3RyaW5nLFxuICBwYXlsb2FkOiBNYXJrVXBsb2FkUmVxdWVzdFBheWxvYWQsXG4pOiBQcm9taXNlPENvbW1hbmRSZXNwb25zZT4gPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgYmFzZVVybCwgdG9rZW4gfSA9IGxvYWRDb25maWcoZGV2LCBwYXRoKVxuXG4gICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5wb3N0KFxuICAgICAgYCR7YmFzZVVybH0vYXBpL3VwbG9hZGVyL2NvbXBsZXRlYCxcbiAgICAgIHBheWxvYWQsXG4gICAgICB7IGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYFRva2VuICR7dG9rZW59YCB9IH0sXG4gICAgKVxuXG4gICAgcmV0dXJuIGRhdGEubWVzc2FnZVxuICAgICAgPyB7IG1lc3NhZ2U6IGRhdGEubWVzc2FnZSwgc3RhdHVzOiAwIH1cbiAgICAgIDogeyBtZXNzYWdlOiB1bmtub3duRXJyb3IsIHN0YXR1czogMSB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKHBhcnNlRXJyb3JNZXNzYWdlKGVycm9yKSlcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgdGVzdENvbm5lY3Rpb24gPSBhc3luYyAoXG4gIGRldjogYm9vbGVhbixcbiAgcGF0aDogc3RyaW5nLFxuICBwYXlsb2FkOiBJbml0aWF0ZVVwbG9hZFJlcXVlc3RQYXlsb2FkLFxuKTogUHJvbWlzZTxDb21tYW5kUmVzcG9uc2U+ID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGJhc2VVcmwsIHRva2VuIH0gPSBsb2FkQ29uZmlnKGRldiwgcGF0aClcblxuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MucG9zdChcbiAgICAgIGAke2Jhc2VVcmx9L2FwaS91cGxvYWRlci90ZXN0YCxcbiAgICAgIHBheWxvYWQsXG4gICAgICB7IGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYFRva2VuICR7dG9rZW59YCB9IH0sXG4gICAgKVxuXG4gICAgcmV0dXJuIGRhdGEubWVzc2FnZVxuICAgICAgPyB7IG1lc3NhZ2U6IGRhdGEubWVzc2FnZSwgc3RhdHVzOiAwIH1cbiAgICAgIDogeyBtZXNzYWdlOiB1bmtub3duRXJyb3IsIHN0YXR1czogMSB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKHBhcnNlRXJyb3JNZXNzYWdlKGVycm9yKSlcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgdXBkYXRlTWV0YWRhdGEgPSBhc3luYyAoXG4gIGRldjogYm9vbGVhbixcbiAgcGF0aDogc3RyaW5nLFxuICBwYXlsb2FkOiBJbml0aWF0ZVVwbG9hZFJlcXVlc3RQYXlsb2FkLFxuKTogUHJvbWlzZTxDb21tYW5kUmVzcG9uc2U+ID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGJhc2VVcmwsIHRva2VuIH0gPSBsb2FkQ29uZmlnKGRldiwgcGF0aClcblxuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MucG9zdChcbiAgICAgIGAke2Jhc2VVcmx9L2FwaS91cGxvYWRlci9tZXRhZGF0YWAsXG4gICAgICBwYXlsb2FkLFxuICAgICAgeyBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBUb2tlbiAke3Rva2VufWAgfSB9LFxuICAgIClcblxuICAgIHJldHVybiBkYXRhLm1lc3NhZ2VcbiAgICAgID8geyBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UsIHN0YXR1czogMCB9XG4gICAgICA6IHsgbWVzc2FnZTogdW5rbm93bkVycm9yLCBzdGF0dXM6IDEgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihwYXJzZUVycm9yTWVzc2FnZShlcnJvcikpXG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///211\n')},9:function(__unused_webpack_module,exports,__webpack_require__){eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar commander_1 = __webpack_require__(858);\nvar config_1 = __webpack_require__(395);\nvar gateway_1 = __webpack_require__(211);\nvar upload_1 = __webpack_require__(700);\nvar package_json_1 = __webpack_require__(3);\nvar program = new commander_1.Command();\nprogram\n    .name('udn-uploader')\n    .description('CLI to upload sequencing files to the UDN Gateway')\n    .version(package_json_1.version);\nprogram\n    .command('config')\n    .description('updates your udn-uploader config with your API token retrieved from the UDN Gateway')\n    .argument('<token>', 'your API token retrieved from the UDN Gateway')\n    .option('-d --dev', 'set the token for the dev environment', false)\n    .action(function (token, options) {\n    var _a = (0, config_1.writeConfig)(options.dev, (0, config_1.getLocalPath)(process.argv), token), message = _a.message, status = _a.status;\n    process.stdout.write(\"\".concat(message, \"\\n\"));\n    process.exit(status);\n});\nprogram\n    .command('metadata')\n    .description('updates the metadata associated with a previously uploaded file')\n    .argument('<filepath>', 'path to the file JSON file containing the updated information')\n    .option('-d --dev', 'set the token for the dev environment', false)\n    .action(function (filepath, options) { return __awaiter(void 0, void 0, void 0, function () {\n    var _a, message, status;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0: return [4, (0, upload_1.uploadNewMetadata)(options.dev, filepath, (0, config_1.getLocalPath)(process.argv))];\n            case 1:\n                _a = _b.sent(), message = _a.message, status = _a.status;\n                process.stdout.write(\"\".concat(message, \"\\n\"));\n                process.exit(status);\n                return [2];\n        }\n    });\n}); });\nprogram\n    .command('test')\n    .description('tests that the file provided meets all pre-requisites to be successfully uploaded')\n    .argument('<filepath>', 'path to the file to test upload')\n    .option('-d --dev', 'set the token for the dev environment', false)\n    .action(function (filepath, options) { return __awaiter(void 0, void 0, void 0, function () {\n    var _a, message, status;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0: return [4, (0, upload_1.testUpload)(options.dev, filepath, (0, config_1.getLocalPath)(process.argv))];\n            case 1:\n                _a = _b.sent(), message = _a.message, status = _a.status;\n                process.stdout.write(\"\".concat(message, \"\\n\"));\n                process.exit(status);\n                return [2];\n        }\n    });\n}); });\nprogram\n    .command('upload')\n    .description('uploads the file specified to the UDN Gateway')\n    .option('-d --dev', 'upload the file to the UDN dev server instead of prod', false)\n    .option('-f --force', 'overwrite the previous successful upload with this new file', false)\n    .argument('<filepath>', 'path to the file to upload')\n    .action(function (filepath, options) { return __awaiter(void 0, void 0, void 0, function () {\n    var _a, message, status;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0: return [4, (0, upload_1.uploadFile)(options.dev, filepath, options.force, (0, config_1.getLocalPath)(process.argv))];\n            case 1:\n                _a = _b.sent(), message = _a.message, status = _a.status;\n                process.stdout.write(\"\".concat(message, \"\\n\"));\n                process.exit(status);\n                return [2];\n        }\n    });\n}); });\nprogram\n    .command('update')\n    .description('allows you to check if there is a newer version of the udn-uploader tool available')\n    .option('-d --dev', 'check if there is a newer version of the uploader available', false)\n    .action(function (options) { return __awaiter(void 0, void 0, void 0, function () {\n    var _a, message, status;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0: return [4, (0, gateway_1.checkForUpdate)(options.dev, (0, config_1.getLocalPath)(process.argv))];\n            case 1:\n                _a = _b.sent(), message = _a.message, status = _a.status;\n                process.stdout.write(\"\".concat(message, \"\\n\"));\n                process.exit(status);\n                return [2];\n        }\n    });\n}); });\nprogram\n    .command('version')\n    .action(function () {\n    process.stdout.write(\"\".concat(package_json_1.version, \"\\n\"));\n    process.exit(0);\n});\nprogram.parse();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTs7QUFBQTtBQUVBO0FBQ0E7Ozs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUNBOztBQUFBO0FBRUE7QUFDQTs7OztBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTs7QUFBQTtBQUVBO0FBQ0E7Ozs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTs7QUFBQTtBQUVBO0FBQ0E7Ozs7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdWRuLWdhdGV3YXkvLi4vLi4vVXNlcnMvaWFuZG9ubG9uL0Rlc2t0b3AvdWRuLWdhdGV3YXkvdXBsb2FkZXIvc3JjL2luZGV4LnRzP2YwZWEiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gJ2NvbW1hbmRlcidcbmltcG9ydCB0eXBlIHsgQ29uZmlnT3B0aW9ucywgT3B0aW9ucywgVXBsb2FkT3B0aW9ucyB9IGZyb20gJy4uL3R5cGVzJ1xuXG5pbXBvcnQgeyBnZXRMb2NhbFBhdGgsIHdyaXRlQ29uZmlnIH0gZnJvbSAnLi9jb25maWcnXG5pbXBvcnQgeyBjaGVja0ZvclVwZGF0ZSB9IGZyb20gJy4vZ2F0ZXdheSdcbmltcG9ydCB7IHRlc3RVcGxvYWQsIHVwbG9hZEZpbGUsIHVwbG9hZE5ld01ldGFkYXRhIH0gZnJvbSAnLi91cGxvYWQnXG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSAnLi4vcGFja2FnZS5qc29uJ1xuXG5jb25zdCBwcm9ncmFtID0gbmV3IENvbW1hbmQoKVxuXG5wcm9ncmFtXG4gIC5uYW1lKCd1ZG4tdXBsb2FkZXInKVxuICAuZGVzY3JpcHRpb24oJ0NMSSB0byB1cGxvYWQgc2VxdWVuY2luZyBmaWxlcyB0byB0aGUgVUROIEdhdGV3YXknKVxuICAudmVyc2lvbih2ZXJzaW9uKVxuXG5wcm9ncmFtXG4gIC5jb21tYW5kKCdjb25maWcnKVxuICAuZGVzY3JpcHRpb24oJ3VwZGF0ZXMgeW91ciB1ZG4tdXBsb2FkZXIgY29uZmlnIHdpdGggeW91ciBBUEkgdG9rZW4gcmV0cmlldmVkIGZyb20gdGhlIFVETiBHYXRld2F5JylcbiAgLmFyZ3VtZW50KCc8dG9rZW4+JywgJ3lvdXIgQVBJIHRva2VuIHJldHJpZXZlZCBmcm9tIHRoZSBVRE4gR2F0ZXdheScpXG4gIC5vcHRpb24oJy1kIC0tZGV2JywgJ3NldCB0aGUgdG9rZW4gZm9yIHRoZSBkZXYgZW52aXJvbm1lbnQnLCBmYWxzZSlcbiAgLmFjdGlvbigodG9rZW46IHN0cmluZywgb3B0aW9uczogQ29uZmlnT3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHsgbWVzc2FnZSwgc3RhdHVzIH0gPSB3cml0ZUNvbmZpZyhvcHRpb25zLmRldiwgZ2V0TG9jYWxQYXRoKHByb2Nlc3MuYXJndiksIHRva2VuKVxuXG4gICAgcHJvY2Vzcy5zdGRvdXQud3JpdGUoYCR7bWVzc2FnZX1cXG5gKVxuICAgIHByb2Nlc3MuZXhpdChzdGF0dXMpXG4gIH0pXG5cbnByb2dyYW1cbiAgLmNvbW1hbmQoJ21ldGFkYXRhJylcbiAgLmRlc2NyaXB0aW9uKCd1cGRhdGVzIHRoZSBtZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggYSBwcmV2aW91c2x5IHVwbG9hZGVkIGZpbGUnKVxuICAuYXJndW1lbnQoJzxmaWxlcGF0aD4nLCAncGF0aCB0byB0aGUgZmlsZSBKU09OIGZpbGUgY29udGFpbmluZyB0aGUgdXBkYXRlZCBpbmZvcm1hdGlvbicpXG4gIC5vcHRpb24oJy1kIC0tZGV2JywgJ3NldCB0aGUgdG9rZW4gZm9yIHRoZSBkZXYgZW52aXJvbm1lbnQnLCBmYWxzZSlcbiAgLmFjdGlvbihhc3luYyAoZmlsZXBhdGg6IHN0cmluZywgb3B0aW9uczogVXBsb2FkT3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHsgbWVzc2FnZSwgc3RhdHVzIH0gPSBhd2FpdCB1cGxvYWROZXdNZXRhZGF0YShvcHRpb25zLmRldiwgZmlsZXBhdGgsIGdldExvY2FsUGF0aChwcm9jZXNzLmFyZ3YpKVxuXG4gICAgcHJvY2Vzcy5zdGRvdXQud3JpdGUoYCR7bWVzc2FnZX1cXG5gKVxuICAgIHByb2Nlc3MuZXhpdChzdGF0dXMpXG4gIH0pXG5cbnByb2dyYW1cbiAgLmNvbW1hbmQoJ3Rlc3QnKVxuICAuZGVzY3JpcHRpb24oJ3Rlc3RzIHRoYXQgdGhlIGZpbGUgcHJvdmlkZWQgbWVldHMgYWxsIHByZS1yZXF1aXNpdGVzIHRvIGJlIHN1Y2Nlc3NmdWxseSB1cGxvYWRlZCcpXG4gIC5hcmd1bWVudCgnPGZpbGVwYXRoPicsICdwYXRoIHRvIHRoZSBmaWxlIHRvIHRlc3QgdXBsb2FkJylcbiAgLm9wdGlvbignLWQgLS1kZXYnLCAnc2V0IHRoZSB0b2tlbiBmb3IgdGhlIGRldiBlbnZpcm9ubWVudCcsIGZhbHNlKVxuICAuYWN0aW9uKGFzeW5jIChmaWxlcGF0aDogc3RyaW5nLCBvcHRpb25zOiBVcGxvYWRPcHRpb25zKSA9PiB7XG4gICAgY29uc3QgeyBtZXNzYWdlLCBzdGF0dXMgfSA9IGF3YWl0IHRlc3RVcGxvYWQob3B0aW9ucy5kZXYsIGZpbGVwYXRoLCBnZXRMb2NhbFBhdGgocHJvY2Vzcy5hcmd2KSlcblxuICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKGAke21lc3NhZ2V9XFxuYClcbiAgICBwcm9jZXNzLmV4aXQoc3RhdHVzKVxuICB9KVxuXG5wcm9ncmFtXG4gIC5jb21tYW5kKCd1cGxvYWQnKVxuICAuZGVzY3JpcHRpb24oJ3VwbG9hZHMgdGhlIGZpbGUgc3BlY2lmaWVkIHRvIHRoZSBVRE4gR2F0ZXdheScpXG4gIC5vcHRpb24oJy1kIC0tZGV2JywgJ3VwbG9hZCB0aGUgZmlsZSB0byB0aGUgVUROIGRldiBzZXJ2ZXIgaW5zdGVhZCBvZiBwcm9kJywgZmFsc2UpXG4gIC5vcHRpb24oJy1mIC0tZm9yY2UnLCAnb3ZlcndyaXRlIHRoZSBwcmV2aW91cyBzdWNjZXNzZnVsIHVwbG9hZCB3aXRoIHRoaXMgbmV3IGZpbGUnLCBmYWxzZSlcbiAgLmFyZ3VtZW50KCc8ZmlsZXBhdGg+JywgJ3BhdGggdG8gdGhlIGZpbGUgdG8gdXBsb2FkJylcbiAgLmFjdGlvbihhc3luYyAoZmlsZXBhdGg6IHN0cmluZywgb3B0aW9uczogVXBsb2FkT3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHsgbWVzc2FnZSwgc3RhdHVzIH0gPSBhd2FpdCB1cGxvYWRGaWxlKG9wdGlvbnMuZGV2LCBmaWxlcGF0aCwgb3B0aW9ucy5mb3JjZSwgZ2V0TG9jYWxQYXRoKHByb2Nlc3MuYXJndikpXG5cbiAgICBwcm9jZXNzLnN0ZG91dC53cml0ZShgJHttZXNzYWdlfVxcbmApXG4gICAgcHJvY2Vzcy5leGl0KHN0YXR1cylcbiAgfSlcblxucHJvZ3JhbVxuICAuY29tbWFuZCgndXBkYXRlJylcbiAgLmRlc2NyaXB0aW9uKCdhbGxvd3MgeW91IHRvIGNoZWNrIGlmIHRoZXJlIGlzIGEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgdWRuLXVwbG9hZGVyIHRvb2wgYXZhaWxhYmxlJylcbiAgLm9wdGlvbignLWQgLS1kZXYnLCAnY2hlY2sgaWYgdGhlcmUgaXMgYSBuZXdlciB2ZXJzaW9uIG9mIHRoZSB1cGxvYWRlciBhdmFpbGFibGUnLCBmYWxzZSlcbiAgLmFjdGlvbihhc3luYyAob3B0aW9uczogT3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHsgbWVzc2FnZSwgc3RhdHVzIH0gPSBhd2FpdCBjaGVja0ZvclVwZGF0ZShvcHRpb25zLmRldiwgZ2V0TG9jYWxQYXRoKHByb2Nlc3MuYXJndikpXG5cbiAgICBwcm9jZXNzLnN0ZG91dC53cml0ZShgJHttZXNzYWdlfVxcbmApXG4gICAgcHJvY2Vzcy5leGl0KHN0YXR1cylcbiAgfSlcblxucHJvZ3JhbVxuICAuY29tbWFuZCgndmVyc2lvbicpXG4gIC5hY3Rpb24oKCkgPT4ge1xuICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKGAke3ZlcnNpb259XFxuYClcbiAgICBwcm9jZXNzLmV4aXQoMClcbiAgfSlcblxucHJvZ3JhbS5wYXJzZSgpXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9\n")},527:function(__unused_webpack_module,exports,__webpack_require__){eval('\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { "default": mod };\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.validateJSON = exports.convertJsonToUploadPayload = void 0;\nvar path_1 = __importDefault(__webpack_require__(928));\nvar fs_1 = __webpack_require__(896);\nvar md5_file_1 = __importDefault(__webpack_require__(425));\nvar errors_1 = __webpack_require__(34);\nvar version_1 = __webpack_require__(153);\nvar convertJsonToUploadPayload = function (filePath, force, json) { return __awaiter(void 0, void 0, Promise, function () {\n    var fileName, md5sum, _a, timestamp, version;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                fileName = path_1.default.basename(filePath);\n                return [4, (0, md5_file_1.default)(filePath)];\n            case 1:\n                md5sum = _b.sent();\n                _a = (0, version_1.getVersionPayload)(), timestamp = _a.timestamp, version = _a.version;\n                return [2, {\n                        core: json.sequencing_site,\n                        fileName: fileName,\n                        force: force,\n                        metadata: __assign(__assign({}, json.metadata), { md5sum: md5sum }),\n                        participantId: json.patient_id,\n                        sequenceRequestId: json.sequence_request_id,\n                        timestamp: timestamp,\n                        version: version,\n                    }];\n        }\n    });\n}); };\nexports.convertJsonToUploadPayload = convertJsonToUploadPayload;\nvar validateJSON = function (filePath) {\n    var json = {};\n    var requiredFields = [\'metadata\', \'patient_id\', \'sequence_request_id\', \'sequencing_site\'];\n    var requiredMetadataField = [\'assembly\'];\n    var jsonFilePath = "".concat(filePath, ".json");\n    if (!(0, fs_1.existsSync)(jsonFilePath)) {\n        throw new Error(errors_1.noJSONFile);\n    }\n    try {\n        json = JSON.parse((0, fs_1.readFileSync)(jsonFilePath).toString());\n    }\n    catch (error) {\n        throw new Error(errors_1.unparseableJSON);\n    }\n    var errors = [];\n    requiredFields.forEach(function (field) {\n        if (!json[field]) {\n            errors.push("".concat(field, " is required"));\n        }\n    });\n    requiredMetadataField.forEach(function (field) {\n        var metadata = json.metadata;\n        if (!metadata[field]) {\n            errors.push("".concat(field, " is required in the metadata"));\n        }\n    });\n    if (errors.length) {\n        throw new Error("".concat(errors_1.invalidJSON, " ").concat(errors.join(\', \')));\n    }\n    return json;\n};\nexports.validateJSON = validateJSON;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTI3LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBOzs7OztBQUtBO0FBQ0E7O0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQW5CQTtBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQXJDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Vkbi1nYXRld2F5Ly4uLy4uL1VzZXJzL2lhbmRvbmxvbi9EZXNrdG9wL3Vkbi1nYXRld2F5L3VwbG9hZGVyL3NyYy9qc29uLnRzPzYxZmYiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzICovXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuaW1wb3J0IHsgZXhpc3RzU3luYywgcmVhZEZpbGVTeW5jIH0gZnJvbSAnZnMnXG5pbXBvcnQgbWQ1RmlsZSBmcm9tICdtZDUtZmlsZSdcbmltcG9ydCB7IEZpbGVKU09OLCBJbml0aWF0ZVVwbG9hZFJlcXVlc3RQYXlsb2FkLCBKU09OS2V5cywgTWV0YWRhdGFLZXlzIH0gZnJvbSAnLi4vdHlwZXMnXG5cbmltcG9ydCB7IGludmFsaWRKU09OLCBub0pTT05GaWxlLCB1bnBhcnNlYWJsZUpTT04gfSBmcm9tICcuL2Vycm9ycydcbmltcG9ydCB7IGdldFZlcnNpb25QYXlsb2FkIH0gZnJvbSAnLi92ZXJzaW9uJ1xuXG5leHBvcnQgY29uc3QgY29udmVydEpzb25Ub1VwbG9hZFBheWxvYWQgPSBhc3luYyAoXG4gIGZpbGVQYXRoOiBzdHJpbmcsXG4gIGZvcmNlOiBib29sZWFuLFxuICBqc29uOiBGaWxlSlNPTixcbik6IFByb21pc2U8SW5pdGlhdGVVcGxvYWRSZXF1ZXN0UGF5bG9hZD4gPT4ge1xuICBjb25zdCBmaWxlTmFtZSA9IHBhdGguYmFzZW5hbWUoZmlsZVBhdGgpXG4gIGNvbnN0IG1kNXN1bSA9IGF3YWl0IG1kNUZpbGUoZmlsZVBhdGgpXG4gIGNvbnN0IHsgdGltZXN0YW1wLCB2ZXJzaW9uIH0gPSBnZXRWZXJzaW9uUGF5bG9hZCgpXG5cbiAgcmV0dXJuIHtcbiAgICBjb3JlOiBqc29uLnNlcXVlbmNpbmdfc2l0ZSxcbiAgICBmaWxlTmFtZSxcbiAgICBmb3JjZSxcbiAgICBtZXRhZGF0YTogeyAuLi5qc29uLm1ldGFkYXRhLCBtZDVzdW0gfSxcbiAgICBwYXJ0aWNpcGFudElkOiBqc29uLnBhdGllbnRfaWQsXG4gICAgc2VxdWVuY2VSZXF1ZXN0SWQ6IGpzb24uc2VxdWVuY2VfcmVxdWVzdF9pZCxcbiAgICB0aW1lc3RhbXAsXG4gICAgdmVyc2lvbixcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgdmFsaWRhdGVKU09OID0gKGZpbGVQYXRoOiBzdHJpbmcpOiBGaWxlSlNPTiA9PiB7XG4gIGxldCBqc29uID0ge30gYXMgRmlsZUpTT05cbiAgY29uc3QgcmVxdWlyZWRGaWVsZHMgPSBbJ21ldGFkYXRhJywgJ3BhdGllbnRfaWQnLCAnc2VxdWVuY2VfcmVxdWVzdF9pZCcsICdzZXF1ZW5jaW5nX3NpdGUnXSBhcyBBcnJheTxKU09OS2V5cz5cbiAgY29uc3QgcmVxdWlyZWRNZXRhZGF0YUZpZWxkID0gWydhc3NlbWJseSddIGFzIEFycmF5PE1ldGFkYXRhS2V5cz5cblxuICBjb25zdCBqc29uRmlsZVBhdGggPSBgJHtmaWxlUGF0aH0uanNvbmBcblxuICBpZiAoIWV4aXN0c1N5bmMoanNvbkZpbGVQYXRoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihub0pTT05GaWxlKVxuICB9XG5cbiAgdHJ5IHtcbiAgICBqc29uID0gSlNPTi5wYXJzZShyZWFkRmlsZVN5bmMoanNvbkZpbGVQYXRoKS50b1N0cmluZygpKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcih1bnBhcnNlYWJsZUpTT04pXG4gIH1cblxuICBjb25zdCBlcnJvcnMgPSBbXSBhcyBBcnJheTxzdHJpbmc+XG5cbiAgcmVxdWlyZWRGaWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICBpZiAoIWpzb25bZmllbGRdKSB7XG4gICAgICBlcnJvcnMucHVzaChgJHtmaWVsZH0gaXMgcmVxdWlyZWRgKVxuICAgIH1cbiAgfSlcblxuICByZXF1aXJlZE1ldGFkYXRhRmllbGQuZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICBjb25zdCB7IG1ldGFkYXRhIH0gPSBqc29uXG4gICAgaWYgKCFtZXRhZGF0YVtmaWVsZF0pIHtcbiAgICAgIGVycm9ycy5wdXNoKGAke2ZpZWxkfSBpcyByZXF1aXJlZCBpbiB0aGUgbWV0YWRhdGFgKVxuICAgIH1cbiAgfSlcblxuICBpZiAoZXJyb3JzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtpbnZhbGlkSlNPTn0gJHtlcnJvcnMuam9pbignLCAnKX1gKVxuICB9XG5cbiAgcmV0dXJuIGpzb25cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///527\n')},700:function(__unused_webpack_module,exports,__webpack_require__){eval('\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.uploadNewMetadata = exports.uploadFile = exports.testUpload = void 0;\nvar fs_1 = __webpack_require__(896);\nvar aws_1 = __webpack_require__(320);\nvar errors_1 = __webpack_require__(34);\nvar gateway_1 = __webpack_require__(211);\nvar json_1 = __webpack_require__(527);\nvar version_1 = __webpack_require__(153);\nvar testUpload = function (dev, filePath, path) { return __awaiter(void 0, void 0, Promise, function () {\n    var json, payload, error_1;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                _a.trys.push([0, 3, , 4]);\n                if (!(0, fs_1.existsSync)(filePath)) {\n                    return [2, { message: errors_1.noFileAtPath, status: 1 }];\n                }\n                json = (0, json_1.validateJSON)(filePath);\n                return [4, (0, json_1.convertJsonToUploadPayload)(filePath, false, json)];\n            case 1:\n                payload = _a.sent();\n                return [4, (0, gateway_1.testConnection)(dev, path, payload)];\n            case 2: return [2, _a.sent()];\n            case 3:\n                error_1 = _a.sent();\n                return [2, { message: error_1.message, status: 1 }];\n            case 4: return [2];\n        }\n    });\n}); };\nexports.testUpload = testUpload;\nvar uploadFile = function (dev, filePath, force, path) { return __awaiter(void 0, void 0, Promise, function () {\n    var json, payload, _a, accessKey, bucket, fileId, folderName, region, secretKey, sessionToken, error_2;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                _b.trys.push([0, 5, , 6]);\n                if (!(0, fs_1.existsSync)(filePath)) {\n                    return [2, { message: errors_1.noFileAtPath, status: 1 }];\n                }\n                json = (0, json_1.validateJSON)(filePath);\n                return [4, (0, json_1.convertJsonToUploadPayload)(filePath, force, json)];\n            case 1:\n                payload = _b.sent();\n                return [4, (0, gateway_1.initiateFileUpload)(dev, path, payload)];\n            case 2:\n                _a = _b.sent(), accessKey = _a.accessKey, bucket = _a.bucket, fileId = _a.fileId, folderName = _a.folderName, region = _a.region, secretKey = _a.secretKey, sessionToken = _a.sessionToken;\n                if (!accessKey || !bucket || !fileId || !folderName || !secretKey || !sessionToken) {\n                    return [2, { message: errors_1.unknownError, status: 1 }];\n                }\n                return [4, (0, aws_1.uploadMultipartFileToS3)(accessKey, bucket, filePath, folderName, region, secretKey, sessionToken)];\n            case 3:\n                _b.sent();\n                return [4, (0, gateway_1.markComplete)(dev, path, __assign(__assign({}, (0, version_1.getVersionPayload)()), { fileId: fileId }))];\n            case 4: return [2, _b.sent()];\n            case 5:\n                error_2 = _b.sent();\n                return [2, { message: error_2.message, status: 1 }];\n            case 6: return [2];\n        }\n    });\n}); };\nexports.uploadFile = uploadFile;\nvar uploadNewMetadata = function (dev, jsonFilePath, path) { return __awaiter(void 0, void 0, Promise, function () {\n    var filePath, json, payload, error_3;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                _a.trys.push([0, 3, , 4]);\n                if (!(0, fs_1.existsSync)(jsonFilePath)) {\n                    return [2, { message: errors_1.noMetadataJSONFile, status: 1 }];\n                }\n                filePath = jsonFilePath.replace(\'.json\', \'\');\n                json = (0, json_1.validateJSON)(filePath);\n                return [4, (0, json_1.convertJsonToUploadPayload)(filePath, false, json)];\n            case 1:\n                payload = _a.sent();\n                return [4, (0, gateway_1.updateMetadata)(dev, path, payload)];\n            case 2: return [2, _a.sent()];\n            case 3:\n                error_3 = _a.sent();\n                return [2, { message: error_3.message, status: 1 }];\n            case 4: return [2];\n        }\n    });\n}); };\nexports.uploadNewMetadata = uploadNewMetadata;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzAwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBQUE7QUFFQTtBQUFBOzs7QUFFQTs7OztBQUVBO0FBYkE7QUFlQTs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFBQTtBQUlBOztBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRUE7O0FBQUE7QUFFQTtBQUFBOzs7QUFFQTs7OztBQUVBO0FBNUJBO0FBOEJBOzs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBQUE7QUFFQTtBQUFBOzs7QUFFQTs7OztBQUVBO0FBZEEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91ZG4tZ2F0ZXdheS8uLi8uLi9Vc2Vycy9pYW5kb25sb24vRGVza3RvcC91ZG4tZ2F0ZXdheS91cGxvYWRlci9zcmMvdXBsb2FkLnRzP2E4MmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhpc3RzU3luYyB9IGZyb20gJ2ZzJ1xuaW1wb3J0IHsgQ29tbWFuZFJlc3BvbnNlLCBGaWxlSlNPTiwgSW5pdGlhdGVVcGxvYWRSZXNwb25zZVBheWxvYWQgfSBmcm9tICcuLi90eXBlcydcblxuaW1wb3J0IHsgdXBsb2FkTXVsdGlwYXJ0RmlsZVRvUzMgfSBmcm9tICcuL2F3cydcbmltcG9ydCB7IG5vRmlsZUF0UGF0aCwgbm9NZXRhZGF0YUpTT05GaWxlLCB1bmtub3duRXJyb3IgfSBmcm9tICcuL2Vycm9ycydcbmltcG9ydCB7IGluaXRpYXRlRmlsZVVwbG9hZCwgbWFya0NvbXBsZXRlLCB1cGRhdGVNZXRhZGF0YSwgdGVzdENvbm5lY3Rpb24gfSBmcm9tICcuL2dhdGV3YXknXG5pbXBvcnQgeyBjb252ZXJ0SnNvblRvVXBsb2FkUGF5bG9hZCwgdmFsaWRhdGVKU09OIH0gZnJvbSAnLi9qc29uJ1xuaW1wb3J0IHsgZ2V0VmVyc2lvblBheWxvYWQgfSBmcm9tICcuL3ZlcnNpb24nXG5cbmV4cG9ydCBjb25zdCB0ZXN0VXBsb2FkID0gYXN5bmMgKGRldjogYm9vbGVhbiwgZmlsZVBhdGg6IHN0cmluZywgcGF0aDogc3RyaW5nKTogUHJvbWlzZTxDb21tYW5kUmVzcG9uc2U+ID0+IHtcbiAgdHJ5IHtcbiAgICBpZiAoIWV4aXN0c1N5bmMoZmlsZVBhdGgpKSB7XG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBub0ZpbGVBdFBhdGgsIHN0YXR1czogMSB9XG4gICAgfVxuXG4gICAgY29uc3QganNvbiA9IHZhbGlkYXRlSlNPTihmaWxlUGF0aClcbiAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgY29udmVydEpzb25Ub1VwbG9hZFBheWxvYWQoZmlsZVBhdGgsIGZhbHNlLCBqc29uIGFzIEZpbGVKU09OKVxuXG4gICAgcmV0dXJuIGF3YWl0IHRlc3RDb25uZWN0aW9uKGRldiwgcGF0aCwgcGF5bG9hZClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLCBzdGF0dXM6IDEgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCB1cGxvYWRGaWxlID0gYXN5bmMgKFxuICBkZXY6IGJvb2xlYW4sXG4gIGZpbGVQYXRoOiBzdHJpbmcsXG4gIGZvcmNlOiBib29sZWFuLFxuICBwYXRoOiBzdHJpbmcsXG4pOiBQcm9taXNlPENvbW1hbmRSZXNwb25zZT4gPT4ge1xuICB0cnkge1xuICAgIGlmICghZXhpc3RzU3luYyhmaWxlUGF0aCkpIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG5vRmlsZUF0UGF0aCwgc3RhdHVzOiAxIH1cbiAgICB9XG5cbiAgICBjb25zdCBqc29uID0gdmFsaWRhdGVKU09OKGZpbGVQYXRoKVxuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCBjb252ZXJ0SnNvblRvVXBsb2FkUGF5bG9hZChmaWxlUGF0aCwgZm9yY2UsIGpzb24gYXMgRmlsZUpTT04pXG5cbiAgICBjb25zdCB7XG4gICAgICBhY2Nlc3NLZXksIGJ1Y2tldCwgZmlsZUlkLCBmb2xkZXJOYW1lLCByZWdpb24sIHNlY3JldEtleSwgc2Vzc2lvblRva2VuLFxuICAgIH0gPSBhd2FpdCBpbml0aWF0ZUZpbGVVcGxvYWQoZGV2LCBwYXRoLCBwYXlsb2FkKSBhcyBJbml0aWF0ZVVwbG9hZFJlc3BvbnNlUGF5bG9hZFxuXG4gICAgaWYgKCFhY2Nlc3NLZXkgfHwgIWJ1Y2tldCB8fCAhZmlsZUlkIHx8ICFmb2xkZXJOYW1lIHx8ICFzZWNyZXRLZXkgfHwgIXNlc3Npb25Ub2tlbikge1xuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogdW5rbm93bkVycm9yLCBzdGF0dXM6IDEgfVxuICAgIH1cblxuICAgIGF3YWl0IHVwbG9hZE11bHRpcGFydEZpbGVUb1MzKGFjY2Vzc0tleSwgYnVja2V0LCBmaWxlUGF0aCwgZm9sZGVyTmFtZSwgcmVnaW9uLCBzZWNyZXRLZXksIHNlc3Npb25Ub2tlbilcblxuICAgIHJldHVybiBhd2FpdCBtYXJrQ29tcGxldGUoZGV2LCBwYXRoLCB7IC4uLmdldFZlcnNpb25QYXlsb2FkKCksIGZpbGVJZCB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsIHN0YXR1czogMSB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHVwbG9hZE5ld01ldGFkYXRhID0gYXN5bmMgKGRldjogYm9vbGVhbiwganNvbkZpbGVQYXRoOiBzdHJpbmcsIHBhdGg6IHN0cmluZyk6IFByb21pc2U8Q29tbWFuZFJlc3BvbnNlPiA9PiB7XG4gIHRyeSB7XG4gICAgaWYgKCFleGlzdHNTeW5jKGpzb25GaWxlUGF0aCkpIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG5vTWV0YWRhdGFKU09ORmlsZSwgc3RhdHVzOiAxIH1cbiAgICB9XG5cbiAgICBjb25zdCBmaWxlUGF0aCA9IGpzb25GaWxlUGF0aC5yZXBsYWNlKCcuanNvbicsICcnKVxuICAgIGNvbnN0IGpzb24gPSB2YWxpZGF0ZUpTT04oZmlsZVBhdGgpXG4gICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IGNvbnZlcnRKc29uVG9VcGxvYWRQYXlsb2FkKGZpbGVQYXRoLCBmYWxzZSwganNvbiBhcyBGaWxlSlNPTilcblxuICAgIHJldHVybiBhd2FpdCB1cGRhdGVNZXRhZGF0YShkZXYsIHBhdGgsIHBheWxvYWQpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwgc3RhdHVzOiAxIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///700\n')},153:function(__unused_webpack_module,exports,__webpack_require__){eval('\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { "default": mod };\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.getVersionPayload = void 0;\nvar jsonwebtoken_1 = __importDefault(__webpack_require__(829));\nvar errors_1 = __webpack_require__(34);\nvar package_json_1 = __webpack_require__(3);\nvar getVersionPayload = function () {\n    try {\n        var date = new Date();\n        var milliseconds = date.getTime();\n        var timestamp = Math.floor(milliseconds / 1000);\n        var dateString = date.toUTCString();\n        var exp = Math.floor(Date.now() / 1000) + (12 * 60 * 60);\n        var singedVersion = jsonwebtoken_1.default.sign({ version: package_json_1.version, exp: exp }, dateString);\n        return { timestamp: timestamp, version: singedVersion };\n    }\n    catch (error) {\n        throw new Error(errors_1.unknownError);\n    }\n};\nexports.getVersionPayload = getVersionPayload;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUVBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFkQSIsInNvdXJjZXMiOlsid2VicGFjazovL3Vkbi1nYXRld2F5Ly4uLy4uL1VzZXJzL2lhbmRvbmxvbi9EZXNrdG9wL3Vkbi1nYXRld2F5L3VwbG9hZGVyL3NyYy92ZXJzaW9uLnRzP2NkZTEiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbidcbmltcG9ydCB7IFZlcnNpb25QYXlsb2FkIH0gZnJvbSAnLi4vdHlwZXMnXG5cbmltcG9ydCB7IHVua25vd25FcnJvciB9IGZyb20gJy4vZXJyb3JzJ1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4uL3BhY2thZ2UuanNvbidcblxuZXhwb3J0IGNvbnN0IGdldFZlcnNpb25QYXlsb2FkID0gKCk6IFZlcnNpb25QYXlsb2FkID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKVxuICAgIGNvbnN0IG1pbGxpc2Vjb25kcyA9IGRhdGUuZ2V0VGltZSgpXG4gICAgY29uc3QgdGltZXN0YW1wID0gTWF0aC5mbG9vcihtaWxsaXNlY29uZHMgLyAxMDAwKVxuICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBkYXRlLnRvVVRDU3RyaW5nKClcbiAgICBjb25zdCBleHAgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKSArICgxMiAqIDYwICogNjApIC8vIDEyIEhvdXJzIGZyb20gbm93XG5cbiAgICBjb25zdCBzaW5nZWRWZXJzaW9uID0gand0LnNpZ24oeyB2ZXJzaW9uLCBleHAgfSwgZGF0ZVN0cmluZylcblxuICAgIHJldHVybiB7IHRpbWVzdGFtcCwgdmVyc2lvbjogc2luZ2VkVmVyc2lvbiB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKHVua25vd25FcnJvcilcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///153\n')},43:e=>{e.exports=require("@aws-sdk/client-s3")},938:e=>{e.exports=require("axios")},858:e=>{e.exports=require("commander")},829:e=>{e.exports=require("jsonwebtoken")},425:e=>{e.exports=require("md5-file")},896:e=>{e.exports=require("fs")},928:e=>{e.exports=require("path")},3:e=>{e.exports=JSON.parse('{"name":"udn-uploader","version":"1.1.0","description":"Command Line Utility for Uploading Sequencing Files to the UDN Gateway","main":"index.ts","bin":{"upload":"./build/executables.js"},"pkg":{"outputPath":"dist","scripts":"build/executables.js","assets":["../node_modules/axios/**/*"],"targets":["node16-linux-arm64","node16-linux-x64","node16-macos-arm64","node16-macos-x64"]},"author":"","license":"ISC"}')}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__),t.exports}var __webpack_exports__=__webpack_require__(9),__webpack_export_target__=exports;for(var i in __webpack_exports__)__webpack_export_target__[i]=__webpack_exports__[i];__webpack_exports__.__esModule&&Object.defineProperty(__webpack_export_target__,"__esModule",{value:!0})})();